<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact - DaphDesign</title>
  <link rel="icon" type="image/png" href="./assets/images/icons/favicon.png" />
  <link rel="stylesheet" href="./assets/css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet" />
</head>
<body>
  <main>
    <aside class="sidebar" data-sidebar>
      <div class="sidebar-info">
        <figure class="avatar-box">
          <img class="profile-pic" src="./assets/images/logos/logo.jpg" alt="Daphne Varekamp" width="70" />
        </figure>
        <div class="info-content">
          <h1 class="name" title="<Daphne Varekamp>">Daphne Varekamp</h1>
          <p class="title">UI/UX Designer</p>
        </div>
        <button class="info_more-btn" data-sidebar-btn>
          <span>Show Contacts</span>
          <ion-icon name="chevron-down"></ion-icon>
        </button>
      </div>
      <div class="sidebar-info_more">
        <div class="separator"></div>
        <ul class="contacts-list">
          <li class="contact-item"><div class="icon-box"><ion-icon name="mail-outline"></ion-icon></div><div class="contact-info"><p class="contact-title">Email</p><a href="mailto:info@daphdesign.com" class="contact-link">info@daphdesign.com</a></div></li>
          <li class="contact-item"><div class="icon-box"><ion-icon name="business-outline"></ion-icon></div><div class="contact-info"><p class="contact-title">Organization</p><a href="#" class="contact-link">Since 2025</a></div></li>
          <li class="contact-item"><div class="icon-box"><ion-icon name="language-outline"></ion-icon></div><div class="contact-info"><p class="contact-title">Languages</p><time datetime="2001-07-21">Dutch & English</time></div></li>
          <li class="contact-item"><div class="icon-box"><ion-icon name="location-outline"></ion-icon></div><div class="contact-info"><p class="contact-title">Location</p><address>Netherlands</address></div></li>
        </ul>
        <div class="separator"></div>
        <ul class="social-list">
          <li class="social-item"><a href="https://www.linkedin.com/in/daphnevarekamp/" class="social-link"><ion-icon name="logo-linkedin"></ion-icon></a></li>
          <li class="social-item"><a href="https://www.instagram.com/dracava" class="social-link"><ion-icon name="logo-instagram"></ion-icon></a></li>
          <li class="social-item"><a href="https://wwww.facebook.com/daphne.varekamp" class="social-link"><ion-icon name="logo-facebook"></ion-icon></a></li>
        </ul>
      </div>
    </aside>

    <div class="main-content">
      <nav class="navbar">
        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href="index.html">Home</a></li>
          <li class="navbar-item"><a class="navbar-link" href="about.html">About</a></li>
          <li class="navbar-item"><a class="navbar-link" href="resume.html">Resume</a></li>
          <li class="navbar-item"><a class="navbar-link" href="portfolio.html">Portfolio</a></li>
          <li class="navbar-item"><a class="navbar-link active" href="contact.html">Contact</a></li>
        </ul>
      </nav>

      <article class="contact active" data-page="contact">
        <header>
          <h2 class="h2 article-title typewriter">&lt;contact&gt;</h2>
        </header>

        <h3 class="h3 form-title">Let's talk...</h3>

        <div class="contact-tabs" role="tablist" aria-label="Select service">
          <button type="button" class="contact-tab" data-service="UX/UI Design" role="tab" aria-selected="false">UX/UI Design</button>
          <button type="button" class="contact-tab" data-service="Web Development" role="tab" aria-selected="false">Web Development</button>
          <button type="button" class="contact-tab" data-service="Video Editing" role="tab" aria-selected="false">Video Editing</button>
          <button type="button" class="contact-tab" data-service="Other" data-other role="tab" aria-selected="false">Other</button>
        </div>

        <div class="other-service" id="other-service-wrapper" aria-hidden="true">
          <label for="other-service-input">Tell me more</label>
          <input type="text" id="other-service-input" class="form-input" placeholder="Type your interest..." />
        </div>

        <section class="contact-form">
          <form action="#" class="form" data-form>
            <input type="hidden" name="service" id="selected-service" value="" />
            <div class="input-wrapper">
              <div class="input-field"><label for="fullname">Full name <span style="color: #ff6b6b; display: inline;">*</span></label><input type="text" id="fullname" name="fullname" class="form-input" placeholder="Full name" required data-form-input /></div>
              <div class="input-field"><label for="company">Company name</label><input type="text" id="company" name="company" class="form-input" placeholder="Company name" data-form-input /></div>
              <div class="input-field"><label for="email">Email <span style="color: #ff6b6b; display: inline;">*</span></label><input type="email" id="email" name="email" class="form-input" placeholder="Email address" required data-form-input /></div>
              <div class="input-field"><label for="phone">Phone</label><input type="tel" id="phone" name="phone" class="form-input" placeholder="Phone" data-form-input /></div>
            </div>
            <div class="input-field"><label for="message">Message <span style="color: #ff6b6b; display: inline;">*</span></label><textarea id="message" name="message" class="form-input" placeholder="Your Message" required data-form-input></textarea></div>
            <div class="input-field recaptcha-service" id="recaptcha-wrapper" aria-hidden="true">
              <div class="g-recaptcha" data-sitekey="6LfzfbsrAAAAAKg9xDZ2_jSiVNA-QSrvTzE1Eu3q"></div>
            </div>
            <div id="form-notifications" class="form-notifications"></div>
            <button class="form-btn" type="submit" disabled data-form-btn><ion-icon name="paper-plane"></ion-icon><span>Send Message</span></button>
          </form>
        </section>
      </article>
    </div>
  </main>

  <script src="./assets/js/script.js?v=2.0"></script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  <script>
    // prevent global script from auto-rendering captcha on this standalone contact page
    window.DISABLE_AUTO_RECAPTCHA = true;
    // Set custom contact endpoint here if using Cloudflare Workers or other backend
    // Example: window.CONTACT_ENDPOINT = 'https://worker.yourdomain.com/contact';
    // window.CONTACT_ENDPOINT = 'https://api.example.com/contact';
    window.CONTACT_ENDPOINT = 'https://formspree.io/f/mpwyrrqa';
    // Page-scoped logic: tabs + lazy reCAPTCHA that shows on message focus
    document.addEventListener('DOMContentLoaded', function() {
      // Tabs handling (robust delegation)
      const tabsContainer = document.querySelector('.contact-tabs');
      const tabs = document.querySelectorAll('.contact-tab');
      const hidden = document.getElementById('selected-service');
      const otherWrapper = document.getElementById('other-service-wrapper');
      const otherInput = document.getElementById('other-service-input');
      function setOtherVisible(v){ if (otherWrapper) otherWrapper.setAttribute('aria-hidden', v ? 'false' : 'true'); }
      if (tabsContainer && hidden) {
        tabsContainer.addEventListener('click', function(e){
          const tab = e.target.closest('.contact-tab');
          if (!tab) return;
          e.preventDefault();
          const isActive = tab.classList.contains('active');
          tabs.forEach(t => { t.classList.remove('active'); t.setAttribute('aria-selected','false'); });
          if (!isActive) {
            tab.classList.add('active');
            tab.setAttribute('aria-selected','true');
            hidden.value = tab.getAttribute('data-service') || '';
            if (tab.hasAttribute('data-other')) { setOtherVisible(true); otherInput && otherInput.focus(); }
            else { setOtherVisible(false); }
          } else {
            hidden.value = '';
            setOtherVisible(false);
          }
        });
      }

      // Lazy reCAPTCHA: only render after user focuses message
      const form = document.querySelector('form.form');
      const submitBtn = document.querySelector('.form-btn');
      const messageInput = document.getElementById('message');
      const emailInput = document.getElementById('email');
      const notifications = document.getElementById('form-notifications');
      let captchaReady = false;
      let captchaVerified = false;
      function updateSubmitState(){ if (submitBtn && form) submitBtn.disabled = !(form.checkValidity() && captchaVerified); }
      function renderCaptcha() {
        const wrapper = document.getElementById('recaptcha-wrapper');
        if (!wrapper) return;
        wrapper.setAttribute('aria-hidden','false');
        const container = wrapper.querySelector('.g-recaptcha');
        if (!container) return;
        if (typeof grecaptcha !== 'undefined' && !container.querySelector('iframe')) {
          grecaptcha.render(container, {
            sitekey: '6LfzfbsrAAAAAKg9xDZ2_jSiVNA-QSrvTzE1Eu3q',
            callback: function(){ captchaVerified = true; updateSubmitState(); },
            'expired-callback': function(){ captchaVerified = false; updateSubmitState(); }
          });
        }
      }
      function ensureCaptcha(){
        if (captchaReady) { renderCaptcha(); return; }
        window.__contactReady = function(){ captchaReady = true; renderCaptcha(); };
        if (!document.getElementById('grecaptcha-api')){
          const s = document.createElement('script');
          s.id = 'grecaptcha-api';
          s.src = 'https://www.google.com/recaptcha/api.js?onload=__contactReady&render=explicit';
          s.async = true; s.defer = true;
          document.head.appendChild(s);
        }
      }
      // email validation helper and inline error
      function showError(message) {
        if (!notifications) return;
        notifications.innerHTML = '<div class="notification notification-error">🚫 ' + message + '</div>';
      }
      function clearError(){ if (notifications) notifications.innerHTML = ''; }
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (emailInput) {
        emailInput.addEventListener('input', function(){
          if (!emailRegex.test(emailInput.value.trim())) { showError('Please enter a valid email address.'); }
          else { clearError(); }
          updateSubmitState();
        });
      }

      if (messageInput){
        messageInput.addEventListener('focus', function(){ ensureCaptcha(); });
        // also update submit state on any input change
        form && form.addEventListener('input', updateSubmitState);
        updateSubmitState();
      }
    });
  </script>
</body>
</html>

